# 冰火岛
## Microsoft Service
- xmiles\xutuo
- 3232636521tuot

## zentao login
- admin
- 3232636521Tuo_t
- 3232636521TUO_tuo

## 天天赚redis数据库字段
- MainDrawCashIndex
  - 主线提现任务index
- NearestEcpmMap20
  - 历史玩家的ecpm变化趋势
- RedPacketCoin
  - 红包币余额
- DrawState
  - 提现记录，1则提现成功过。用于测试无法提现手机的提现标记，完成好友任务
  - 格式：DrawState:userid_openid 1
  - 
    ```redis
    > SET DrawState:820201_okdX355JY3m6q0rFoSpEMcMZMA2Q 1 
    ```
- InviterDrawVideoListMapV1
  - 好友任务标记领取/标记完成
  - 协同次数检查库
- VideoCount
  - 视频观看次数，连同上面的库，检查好友任务的完成进度。
  










```python
def function():
    return 1
```

## jenkins
 - jdk环境得在8-11的区间



## 分层自动化测试方案

### 1.配置层测试
- 根据策划配置表规则，执行配置层测试。
- 保证配置项的变动，都在规则范围内
- 摒除配置层导致的游戏异常
- 可代码实现工具化
- 可持续集成

### 2.接口自动化
- 根据程序提供的接口文档，执行服务层测试。
- 保证主要业务层接口，在线上环境下能保证稳定。
- 在接口出现异常时，能及时反馈项目组。
- 前期工作量大，后期一本万利（程序配合产出接口文档，测试框架化测试代码）
- 可代码实现工具化
- 可持续集成
  
### 3.UI自动化
- 现阶段的游戏环境，导致UI自动化的深入较难开展
  - 难点1：业务主要核心在于广告的观看上，而广告层不在游戏层内，导致广告的关闭难以结局
  - 难点2：业务内，关于成语接龙，点击填字的操作较难统一成一种代码模式（eg：每次都点击哪些地方让游戏通关等。）
- 



### 好友邀请测试点汇总
- 邀请渠道链接（微信）
- 好友识别二维码下载app
- 好友进入游戏，成功绑定好友关系（下载app绑定方式）
- 好友进入游戏，成功绑定好友关系（输入好友码绑定方式）
- 徒弟第一次提现成功，师傅完成邀请任务
- 徒弟完成10次ad观看，师傅完成10次视频任务（师傅提现非现金，红包币）
- 调整奖励完成档数为（调整后续挡位任务全部完成）完成所有任务，提示“已完成所有挡位”。
- ecpm动态获取奖励（平均500-40 ）领取奖励与配置相符合，符合动态获取奖励需求
- 服务器跨天，重置提现次数
- 最大提现次数5次
- 徒弟师傅不能相互绑定。


# 测试内容
- 1、上应用商店相关
  - 1）应用市场的量全部弹隐私弹框，自然量进益智，非自然量进成语游戏；
  - 2）头条渠道自然量，全部弹隐私弹框+进成语游戏；
  - 3）头条渠道投放量，全部弹隐私弹框+进成语游戏
- 2、登录功能
  - 非自然量，进入游戏无登录按钮，设置界面内无退出账号功能
- 3、邀请好友功能优化
  - 被邀请者，界面展示自己看视频，对邀请者的奖励数据
  - 邀请者界面，展示被邀请者的六艺值
  - 奖励由只奖励红包币，调整为可奖励现金
    - 调整均为现金，可提现
  - 二级奖励查看列表，展示到好友主界面
  - 通过动态ecpm获取好友奖励，符合配置内容，低ecpm用户获取奖励为红包币
  
- 4、主线提现引导 - 每次都引导：
  - 3000档位提现引导 
    - 主线内，奖励达到档位后，触发引导弹窗
    - 引导进入提现弹窗内，点击提现，提现成功
  - 多档位提现
    - 触发引导提现后，再次达到新的档位
    - 触发新一轮引导提现，点击提现，提现成功
  - 单次档位引导只弹出一次
    - 触发一次引导提现弹窗后，不点击提现
    - 再次主线领取红包币后，引导不会弹出
- 5、数值优化：
  - 主线游戏奖励 主线提现成功
  - 积分墙奖励 夏哥测试完成
  - 皇榜奖励 提现成功
  - 好友奖励 
    - 好友累计进度正常
    - 好友任务提现正常
  - 摇钱树奖励 提现成功
  - 签到奖励 红包币领取正常
  - 百倍返利 提现成功
  - 平均ecpm算法更新
    - 取20、10、5的平均ecpm，价值高用谁
- 6、AB Test 方案-新用户初始300ecpm，动态调控
  - 1）新用户进入游戏，缓存的第一个视频的ecpm，为玩家真实ecpm（之前是，所有用户默认300，导致前期低价值用户提现过去）
  - 2）如果玩家真实ecpm＜30，则初始ecpm赋值35
  - 3）如果玩家真实ecpm 30~50，则初始ecpm赋值60
  - 4）如果玩家真实ecpm ≥ 50，则初始ecpm = roundup（ecpm / 100 , 0）*100
  - 5）服务器获取Mustang_user_number字段，进行用户分群
  - 6）0~2999(30%)的用户走新的初始ecpm算法，3000~9999还是走原来的数值，默认初始ecpm300
- 7、更新流程优化
- 8、功能测试相关性补充
  - 更多玩法下载链接是否正常
  - ·





